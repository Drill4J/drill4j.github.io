(self.webpackChunkdrill4j_github_io=self.webpackChunkdrill4j_github_io||[]).push([[3960],{1899:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return d},metadata:function(){return s},toc:function(){return u},default:function(){return c}});var i=n(2122),r=n(9756),l=(n(7294),n(3905)),a=n(549),o=n(6742),d={id:"ci-cd-integration",title:"CI/CD Integration"},s={unversionedId:"drill4net/ci-cd-integration",id:"drill4net/ci-cd-integration",isDocsHomePage:!1,title:"CI/CD Integration",description:"Prerequisites",source:"@site/docs/drill4net/ci-cd-integration.mdx",sourceDirName:"drill4net",slug:"/drill4net/ci-cd-integration",permalink:"/docs/drill4net/ci-cd-integration",version:"current",frontMatter:{id:"ci-cd-integration",title:"CI/CD Integration"},sidebar:"docs",previous:{title:"Quick Start Guide",permalink:"/docs/drill4net/quick-start-guide"},next:{title:"Application Under Test Setup",permalink:"/docs/drill4net/app-under-test-setup"}},u=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"CI/CD Integration",id:"cicd-integration",children:[{value:"1. Update Build Version in Configurations",id:"1-update-build-version-in-configurations",children:[]},{value:"2. Run Drill4Net Scanner",id:"2-run-drill4net-scanner",children:[]},{value:"3. Run Drill4Net Injector",id:"3-run-drill4net-injector",children:[]},{value:"4. Run Tests",id:"4-run-tests",children:[]},{value:"5. Get Tests to Run",id:"5-get-tests-to-run",children:[]}]}],p={toc:u};function c(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,l.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("p",null,"Perform a ",(0,l.kt)(o.Z,{to:"./one-time-setup",target:"_blank",mdxType:"Link"},"one time setup")," before you continue with CI/CD integration."),(0,l.kt)("h2",{id:"cicd-integration"},"CI/CD Integration"),(0,l.kt)("p",null,"The Drill4Net agent should run after the build step in CI/CD pipeline:"),(0,l.kt)(a.Ee,{src:"/img/drill4net/drill4net-build-pipeline.svg",mdxType:"Image"}),(0,l.kt)("h3",{id:"1-update-build-version-in-configurations"},"1. Update Build Version in Configurations"),(0,l.kt)("p",null,"Each build should update build version in ",(0,l.kt)("em",{parentName:"p"},"Drill4Net Scanner")," and ",(0,l.kt)("em",{parentName:"p"},"Drill4Net Injector")," configuration files."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Update ",(0,l.kt)("inlineCode",{parentName:"li"},"adminAgentConfig:buildVersion")," in ",(0,l.kt)("em",{parentName:"li"},"Drill4Net Scanner")," appsettings.yml to version of current build."),(0,l.kt)("li",{parentName:"ol"},"Update ",(0,l.kt)("inlineCode",{parentName:"li"},"AdminAgentConfig:BuildVersion")," in ",(0,l.kt)("em",{parentName:"li"},"Drill4Net Injector")," drill4netsettings.yml to version of current build.")),(0,l.kt)("h3",{id:"2-run-drill4net-scanner"},"2. Run Drill4Net Scanner"),(0,l.kt)("p",null,"After each build, you should ",(0,l.kt)(o.Z,{to:"./drill4net-apps#4-usage",target:"_blank",mdxType:"Link"},"run Drill4Net Scanner")," for\n",(0,l.kt)("em",{parentName:"p"},"application under test")," assembly."),(0,l.kt)("h3",{id:"3-run-drill4net-injector"},"3. Run Drill4Net Injector"),(0,l.kt)("p",null,"After each build, you should ",(0,l.kt)(o.Z,{to:"./drill4net-apps#4-usage",target:"_blank",mdxType:"Link"},"run Drill4Net Injector")," for\n",(0,l.kt)("em",{parentName:"p"},"assembly with tests"),"."),(0,l.kt)("h3",{id:"4-run-tests"},"4. Run Tests"),(0,l.kt)("p",null,"After ",(0,l.kt)("em",{parentName:"p"},"Drill4Net Scanner")," and ",(0,l.kt)("em",{parentName:"p"},"Drill4Net Injector")," finished work, you should run tests from assembly provided to\n",(0,l.kt)("em",{parentName:"p"},"Drill4Net Injector"),"."),(0,l.kt)(a.v3,{mdxType:"Warning"},"Make sure that ",(0,l.kt)("i",null,"application under test")," assembly and ",(0,l.kt)("i",null,"assembly with tests")," are ",(0,l.kt)("b",null,"not")," rebuilt before running tests.",(0,l.kt)("i",null,"Drill4Net Scanner")," and ",(0,l.kt)("i",null,"Drill4Net Injector")," make some important modifications to the assembly to make Drill4Net solution work."),(0,l.kt)("h3",{id:"5-get-tests-to-run"},"5. Get Tests to Run"),(0,l.kt)("p",null,"You can execute the ",(0,l.kt)("inlineCode",{parentName:"p"},"curl")," command to get tests to run:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'curl -i -H "accept: application/json" \\\n  -H "content-type: application/json" \\\n  -X GET {drill4j-address}/api/agents/{agent-id}/plugins/test2code/data/tests-to-run\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"drill4j-address")," is the address of ",(0,l.kt)("em",{parentName:"p"},"Drill4J Admin"),", for example ",(0,l.kt)("inlineCode",{parentName:"p"},"http://localhost:8091"),"."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"agent-id")," is the value of ",(0,l.kt)("inlineCode",{parentName:"p"},"adminAgentConfig:id")," provided in ",(0,l.kt)("em",{parentName:"p"},"Drill4Net Scanner")," earlier."),(0,l.kt)("p",null,"To cover new build's ",(0,l.kt)("em",{parentName:"p"},"Risks")," (methods modified since previous build) it is enough to only run tests returned in thr response."))}c.isMDXComponent=!0}}]);