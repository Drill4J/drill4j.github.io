(self.webpackChunkdrill4j_github_io=self.webpackChunkdrill4j_github_io||[]).push([[3923],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return c},kt:function(){return u}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=p(a),u=r,g=m["".concat(s,".").concat(u)]||m[u]||d[u]||l;return a?n.createElement(g,i(i({ref:t},c),{},{components:a})):n.createElement(g,i({ref:t},c))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2296:function(e,t,a){"use strict";a.d(t,{r0:function(){return s},Ct:function(){return h},jL:function(){return k},Zb:function(){return m},u0:function(){return me},JO:function(){return c},Ee:function(){return b},kI:function(){return U},dl:function(){return M},HC:function(){return T},Wl:function(){return pe},E1:function(){return oe},Nt:function(){return G},iA:function(){return P},v3:function(){return Z}});var n,r,l,i=a(7294),o="additionalInformation_3spC",s=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return i.createElement("p",{className:o+" "+n},t)},p=a(4996),c=function(e){var t=e.src,a=e.width,n=void 0===a?16:a,r=e.height,l=void 0===r?16:r,o=e.className;return i.createElement("span",{className:o,style:{backgroundImage:"url("+(0,p.Z)(t)+")",minWidth:n+"px",minHeight:l+"px",display:"inline-block"}})},d="card_3fnR",m=function(e){var t=e.children,a=e.iconSrc,n=e.href;return i.createElement("a",{href:(0,p.Z)(n),className:d,rel:"noreferrer"},i.createElement(c,{src:a,width:48,height:48}),i.createElement("span",null,t))},u=a(2122),g=a(9756),h=function(e){var t=e.color,a=void 0===t?"#687481":t,n=e.children,r=(0,g.Z)(e,["color","children"]);return i.createElement("span",(0,u.Z)({className:"inline-block px-2 text-14 leading-24 bg-monochrome-light-tint rounded-lg",style:{color:a}},r),n)},k=function(e){var t=e.backgroundSrc,a=e.children,n=(0,g.Z)(e,["backgroundSrc","children"]);return i.createElement("div",(0,u.Z)({className:"py-14 px-5 text-center bg-cover",style:{backgroundImage:"url("+(0,p.Z)(t)+")"}},n),a)},f=a(2879),v={color:"#a9a9a9",fontSize:"14px",marginBottom:"15px"},N={width:"400px",marginBottom:"10px"},b=function(e){var t=e.src,a=e.alt,n=(0,i.useState)(!1),r=n[0],l=n[1];return i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.createElement("img",{className:"cursor-pointer",src:(0,p.Z)(t),onClick:function(){return l(!0)},alt:a,style:N}),r&&i.createElement(f.Z,{mainSrc:(0,p.Z)(t),onCloseRequest:function(){return l(!1)},enableZoom:!1,imagePadding:48}),i.createElement("p",{style:v},a))},y=a(1839);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _,x=function(e){var t=e.title,a=e.titleId,o=C(e,["title","titleId"]);return i.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none","aria-labelledby":a},o),t?i.createElement("title",{id:a},t):null,n||(n=i.createElement("rect",{opacity:.8,width:24,height:24,rx:4,fill:"#687481"})),r||(r=i.createElement("path",{d:"M10.871 13.766l-.407.407-.982.982-1.184 1.184-1.027 1.027c-.166.165-.328.335-.498.497l-.007.007c-.167.167-.473.18-.637 0a.457.457 0 010-.636l.407-.407.982-.982 1.184-1.184 1.027-1.027c.166-.165.328-.335.498-.497l.007-.007c.167-.167.473-.18.637 0 .165.18.179.46 0 .636zm6.999-6.997l-.409.408-.976.976-1.187 1.188-1.022 1.021c-.167.168-.33.338-.5.5l-.008.008c-.167.167-.474.18-.639 0a.459.459 0 010-.639l.409-.408.976-.976 1.187-1.188 1.022-1.021c.167-.168.33-.338.5-.5l.008-.008c.167-.167.474-.18.639 0a.46.46 0 010 .639zm-7.636 4.102l-.407-.407-.982-.982L7.66 8.298 6.634 7.271c-.165-.166-.335-.328-.497-.498l-.007-.007c-.167-.167-.18-.473 0-.637a.457.457 0 01.636 0l.407.407.982.982L9.34 8.702l1.027 1.027c.165.166.335.328.497.498l.007.007c.167.167.18.473 0 .637a.457.457 0 01-.636 0zm6.997 7.001l-.408-.409-.976-.977-1.188-1.187-1.021-1.022c-.168-.168-.338-.33-.5-.5l-.008-.008c-.167-.168-.18-.475 0-.64a.459.459 0 01.639 0l.408.409.976.977 1.188 1.188 1.021 1.021c.168.168.338.33.5.501l.008.008c.167.167.18.474 0 .639a.462.462 0 01-.639 0z",fill:"#fff"})),l||(l=i.createElement("path",{d:"M6.953 13.477v4.046l-.476-.476h4.046c.25 0 .488.219.477.476a.484.484 0 01-.477.477H6.477A.483.483 0 016 17.523v-4.046c0-.25.22-.488.477-.477.259.011.476.21.476.477zM13.477 6h4.046c.258 0 .477.218.477.477v4.046c0 .25-.22.488-.477.477a.484.484 0 01-.476-.477V6.477l.476.476h-4.046c-.25 0-.488-.219-.477-.476A.485.485 0 0113.477 6zm-2.954.953H6.477l.476-.476v4.046c0 .25-.219.488-.476.477A.484.484 0 016 10.523V6.477C6 6.219 6.218 6 6.477 6h4.046c.25 0 .488.22.477.477a.485.485 0 01-.477.476zM18 13.477v4.046a.483.483 0 01-.477.477h-4.046c-.25 0-.488-.22-.477-.477a.484.484 0 01.477-.476h4.046l-.476.476v-4.046c0-.25.219-.488.476-.477.258.011.477.21.477.477z",fill:"#fff"})))};function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var O=function(e){var t=e.title,a=e.titleId,n=j(e,["title","titleId"]);return i.createElement("svg",E({width:36,height:36,viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},n),t?i.createElement("title",{id:a},t):null,_||(_=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.71 25.264a1.003 1.003 0 00-.001 1.415.997.997 0 001.412.002l7.073-7.073 7.07 7.07c.39.39 1.024.391 1.415.001a.997.997 0 00.002-1.412l-7.073-7.073 7.07-7.07c.39-.39.391-1.024.001-1.415a.997.997 0 00-1.412-.002l-7.073 7.073-7.07-7.07a1.003 1.003 0 00-1.414 0 .997.997 0 00-.002 1.412l7.073 7.073-7.07 7.07z"})))},A="table_EoDL",S="customScroll_2cyn",I="expandedTable_1nfl",P=function(e){var t=e.columns,a=void 0===t?[]:t,n=e.children,r=(0,i.useState)(!1),l=r[0],o=r[1],s=(0,i.useState)(!1),p=s[0],c=s[1],d=(0,i.useRef)(null);return(0,y.Z)(l),(0,i.useEffect)((function(){var e=d&&d.current;var t=new ResizeObserver((function(){e&&c(e.offsetHeight-e.clientHeight>0)}));return t.observe(e),function(){t.disconnect(e)}}),[d]),(0,i.useLayoutEffect)((function(){if(d.current&&null!=a&&a.length){var e=d.current.children[0];e.style.tableLayout="fixed";var t=document.createElement("colgroup");null==a||a.forEach((function(e){var a=document.createElement("col");return a.width=e,a.span=1,t.appendChild(a),a})),e.prepend(t)}}),[]),i.createElement("div",{className:A+" relative mb-4"},p&&i.createElement("button",{className:"absolute top-2 right-2 z-10","aria-label":"open expanded table button",type:"button",onClick:function(){return o(!0)}},i.createElement(x,null)),i.createElement("div",{ref:d,className:S},n),p&&i.createElement("div",{className:"fixed inset-0 z-50 transition-all duration-300 "+(l?"opacity-100":"opacity-0 invisible")},i.createElement("div",{className:"relative z-10 flex items-center justify-end h-12 pr-7 bg-monochrome-black bg-opacity-90"},i.createElement("button",{type:"button","aria-label":"close expanded table button",className:"flex items-center justify-center w-9 h-9 text-monochrome-medium-tint hover:text-monochrome-white",onClick:function(){return o(!1)}},i.createElement(O,{className:"fill-current cursor-pointer"}))),i.createElement("div",{className:"absolute inset-0 bg-monochrome-black opacity-60",onClick:function(){return o(!1)}}),i.createElement("div",{className:I+" "+S},n)))},D="listItem_qKEr",J="listItem_content_1vAz",T=function(e){var t=e.children,a=e.number;return i.createElement("div",{className:D},i.createElement("div",null,a),i.createElement("div",{className:J},t))},M=function(){return i.createElement("div",{className:"flex flex-col items-center"},i.createElement("h3",{className:"text-center"},"We are using a RealWorld app examples:"),i.createElement("div",{className:"flex gap-x-6 mb-12 text-16 leading-20"},i.createElement("div",{className:"flex justify-center items-center gap-x-3 leading-20"},i.createElement("img",{style:{marginBottom:0},src:(0,p.Z)("imgs/spring-logo.svg"),alt:"spring-logo"}),i.createElement("span",{className:"flex flex-col"},"Backend:\xa0",i.createElement("a",{className:"leading-20",href:"https://github.com/gothinkster/spring-boot-realworld-example-app",target:"_blank",rel:"noreferrer noopener"},"Spring"))),i.createElement("div",{className:"flex justify-center items-center"},i.createElement("img",{style:{marginBottom:0},src:(0,p.Z)("imgs/plus.svg"),alt:"plus"})),i.createElement("div",{className:"flex justify-center items-center gap-x-3"},i.createElement("img",{style:{marginBottom:0},src:(0,p.Z)("imgs/angular-logo.svg"),alt:"angular-logo"}),i.createElement("span",{className:"flex flex-col leading-20"},"Frontend:\xa0",i.createElement("a",{className:"leading-20",href:"https://github.com/gothinkster/angular-realworld-example-app",target:"_blank",rel:"noreferrer noopener"},"Angular")))))},R=a(6010),L="wrapper_2S3f",Z=function(e){var t=e.children;return i.createElement("div",{className:(0,R.Z)(L,"flex gap-x-3 py-4 px-4 mb-4","rounded-lg bg-orange-default bg-opacity-5","text-monochrome-default text-16 leading-24")},i.createElement(c,{src:"imgs/warning.svg",width:16,height:16,className:"mt-1 h-4 text-orange-default"}),i.createElement("div",null,t))},q="wrapper_1vbA",U=function(e){var t=e.children;return i.createElement("div",{className:(0,R.Z)(q,"flex gap-x-3 py-5 px-4 mb-4","rounded-lg bg-blue-default bg-opacity-5","text-monochrome-default text-16 leading-24")},i.createElement(c,{src:"imgs/info.svg",width:16,height:16,className:"mt-1 h-4 text-orange-default"}),i.createElement("div",null,t))},H=a(5035),V="tableOfContents_1zbr",z="table-of-contents__link";function B(e){var t=e.toc,a=e.isChild;return t.length?i.createElement("ul",{className:a?"":"table-of-contents table-of-contents__left-border"},t.map((function(e){return i.createElement("li",{key:e.id},i.createElement("a",{href:"#"+e.id,className:z,dangerouslySetInnerHTML:{__html:e.value},title:e.value}),i.createElement(B,{isChild:!0,toc:e.children}))}))):null}function G(e){var t=e.toc;return(0,H.Z)(z,"table-of-contents__link--active",100),i.createElement("div",{className:(0,R.Z)(V,"thin-scrollbar")},i.createElement(B,{toc:t}))}var W=a(3935),F=a(2263),K=a(5977),X=a(6742),Y=a(9105),Q=a(6397),$=a(7052),ee=a(6747),te=a(5613),ae=a(4973),ne=null;function re(e){var t=e.hit,a=e.children;return i.createElement(X.Z,{to:t.url},a)}function le(e){var t=e.state,a=e.onClose,n=(0,Q.Z)().generateSearchPageLink;return i.createElement(X.Z,{to:n(t.query),onClick:a},"See all ",t.context.nbHits," results")}function ie(e){var t,n,r=e.contextualSearch,l=e.closeDocsSidebar,o=(0,g.Z)(e,["contextualSearch","closeDocsSidebar"]),s=(0,F.default)().siteMetadata,c=(0,te.Z)(),d=null!=(t=null==(n=o.searchParameters)?void 0:n.facetFilters)?t:[],m=r?[].concat(c,d):d,h=Object.assign({},o.searchParameters,{facetFilters:m}),k=(0,p.C)().withBaseUrl,f=(0,K.k6)(),v=(0,i.useRef)(null),N=(0,i.useRef)(null),b=(0,i.useState)(!1),y=b[0],w=b[1],C=(0,i.useState)(null),_=C[0],x=C[1],E=(0,i.useCallback)((function(){return ne?Promise.resolve():Promise.all([a.e(3763).then(a.bind(a,3763)),Promise.all([a.e(532),a.e(6945)]).then(a.bind(a,6945)),Promise.all([a.e(532),a.e(4628)]).then(a.bind(a,4628))]).then((function(e){var t=e[0].DocSearchModal;ne=t}))}),[]),j=(0,i.useCallback)((function(){E().then((function(){v.current=document.createElement("div"),document.body.insertBefore(v.current,document.body.firstChild),w(!0)}))}),[E,w]),O=(0,i.useCallback)((function(){l(),w(!1),v.current.remove()}),[w]),A=(0,i.useCallback)((function(e){E().then((function(){w(!0),x(e.key)}))}),[E,w,x]),S=(0,i.useRef)({navigate:function(e){var t=e.itemUrl;f.push(t)}}).current,I=(0,i.useRef)((function(e){return e.map((function(e){var t=document.createElement("a");return t.href=e.url,Object.assign({},e,{url:k(""+t.pathname+t.hash)})}))})).current,P=(0,i.useMemo)((function(){return function(e){return i.createElement(le,(0,u.Z)({},e,{onClose:O}))}}),[O]),D=(0,i.useCallback)((function(e){return e.addAlgoliaAgent("docusaurus",s.docusaurusVersion),e}),[s.docusaurusVersion]);(0,$.D)({isOpen:y,onOpen:j,onClose:O,onInput:A,searchButtonRef:N});var J=(0,ae.I)({id:"theme.SearchBar.label",message:"Search",description:"The ARIA label and placeholder for search button"});return i.createElement(i.Fragment,null,i.createElement(Y.Z,null,i.createElement("link",{rel:"preconnect",href:"https://"+o.appId+"-dsn.algolia.net",crossOrigin:"anonymous"})),i.createElement(ee.a,{onTouchStart:E,onFocus:E,onMouseOver:E,onClick:j,ref:N,translations:{buttonText:J,buttonAriaLabel:J}}),y&&(0,W.createPortal)(i.createElement(ne,(0,u.Z)({onClose:O,initialScrollY:window.scrollY,initialQuery:_,navigator:S,transformItems:I,hitComponent:re,resultsFooterComponent:P,transformSearchClient:D},o,{searchParameters:h})),v.current))}var oe=function(e){var t=e.closeDocsSidebar,a=(0,F.default)().siteConfig;return i.createElement(ie,(0,u.Z)({},a.themeConfig.algolia,{closeDocsSidebar:t}))},se=a(3424);se.Z.initialize({startOnLoad:!0});var pe=function(e){var t=e.chart;return(0,i.useEffect)((function(){se.Z.contentLoaded()}),[]),i.createElement("div",{className:"mermaid"},t)},ce=a(7694),de=a(4544),me=function(e){var t=e.language,a=e.children,n="string"==typeof a?a.trim():"";return i.createElement(de.ZP,(0,u.Z)({},de.lG,{theme:ce.Z,code:n,language:t}),(function(e){var t=e.className,a=e.style,n=e.tokens,r=e.getLineProps,l=e.getTokenProps;return i.createElement("pre",{className:t,style:a},n.map((function(e,t){return i.createElement("div",r({line:e,key:t}),e.map((function(e,t){return i.createElement("span",l({token:e,key:t}))})))})))}))}},8648:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return o},metadata:function(){return s},toc:function(){return p},default:function(){return d}});var n=a(2122),r=a(9756),l=(a(7294),a(3905)),i=a(2911),o=(a(2296),{id:"java-agent",title:"Application Agent"}),s={unversionedId:"agents/java-agent",id:"version-0.9.0/agents/java-agent",isDocsHomePage:!1,title:"Application Agent",description:"Drill4J Java Agent enables metrics collection for JVM-based applications.",source:"@site/versioned_docs/version-0.9.0/agents/application-agent.mdx",sourceDirName:"agents",slug:"/agents/java-agent",permalink:"/docs/agents/java-agent",version:"0.9.0",frontMatter:{id:"java-agent",title:"Application Agent"},sidebar:"version-0.9.0/docs",previous:{title:"Releases",permalink:"/docs/releases"},next:{title:"Test Agent",permalink:"/docs/agents/test-agent"}},p=[{value:"How to download",id:"how-to-download",children:[{value:"Download agent files manually",id:"download-agent-files-manually",children:[]},{value:"Use Docker image with a download script",id:"use-docker-image-with-a-download-script",children:[]},{value:"Use Drill4J CI/CD Integration Plugin for Maven and Gradle",id:"use-drill4j-cicd-integration-plugin-for-maven-and-gradle",children:[]}]},{value:"How to set path to agent",id:"how-to-set-path-to-agent",children:[{value:"Native Agent Mode (recommended)",id:"native-agent-mode-recommended",children:[]},{value:"Java Agent Mode",id:"java-agent-mode",children:[]},{value:"Setting agent path argument",id:"setting-agent-path-argument",children:[]},{value:"Troubleshooting",id:"troubleshooting",children:[]}]},{value:"How to set agent parameters",id:"how-to-set-agent-parameters",children:[{value:"Set parameters using environment variables",id:"set-parameters-using-environment-variables",children:[]},{value:"Set parameters in <code>-agentpath</code> argument string",id:"set-parameters-in--agentpath-argument-string",children:[]},{value:"Set parameters in <code>drill.properties</code> file",id:"set-parameters-in-drillproperties-file",children:[]}]},{value:"Agent parameters reference",id:"agent-parameters-reference",children:[{value:"Env variables naming",id:"env-variables-naming",children:[]},{value:"How to set package prefixes",id:"how-to-set-package-prefixes",children:[]},{value:"How to set scanClassPath",id:"how-to-set-scanclasspath",children:[]},{value:"API key security",id:"api-key-security",children:[]},{value:"Considerations regarding <code>buildVersion</code> and <code>commitSha</code>",id:"considerations-regarding-buildversion-and-commitsha",children:[]}]},{value:"Troubleshooting",id:"troubleshooting-1",children:[{value:"How to confirm agent is loaded",id:"how-to-confirm-agent-is-loaded",children:[]},{value:"Cannot load the agent because some agent parameters are set incorrectly",id:"cannot-load-the-agent-because-some-agent-parameters-are-set-incorrectly",children:[]},{value:"Error &quot;Could not create an Appender of type ...&quot;",id:"error-could-not-create-an-appender-of-type-",children:[]}]}],c={toc:p};function d(e){var t=e.components,o=(0,r.Z)(e,["components"]);return(0,l.kt)("wrapper",(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Drill4J Java Agent enables metrics collection for JVM-based applications."),(0,l.kt)("p",null,"General integration steps are:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"#how-to-download"},"Download Drill4J agent files")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"#how-to-set-path-to-agent"},"Set path to agent")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"#how-to-set-agent-parameters"},"Set agent parameters"))),(0,l.kt)("p",null,"Due to the diverse tools used in software development \u2014 such as CI/CD providers, deployment methods, testing stages \u2014 the exact process will depend on the environment."),(0,l.kt)("h2",{id:"how-to-download"},"How to download"),(0,l.kt)("h3",{id:"download-agent-files-manually"},"Download agent files manually"),(0,l.kt)("p",null,"The most basic way to get agent files is to download release .zip manually."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Download release appropriate for your platform at"),(0,l.kt)("a",{href:"https://github.com/Drill4J/java-agent/releases/tag/v"+i.Hl}," ","https://github.com/Drill4J/java-agent/releases/tag/v"+i.Hl," "),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"mingwX64")," is for Windows, Linux and Mac releases are called respectively.")),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"If your platform is not listed above, use the ",(0,l.kt)("a",{parentName:"p",href:"/docs/agents/java-agent#java-agent-mode"},"Java agent mode")," instead of native mode."))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Unzip the file. Rename unzipped folder to ",(0,l.kt)("inlineCode",{parentName:"p"},"agent"),".")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Inside you'll find the following files:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"libdrill_agent.so")," (on Windows - ",(0,l.kt)("inlineCode",{parentName:"li"},".dll"),", on Mac - ",(0,l.kt)("inlineCode",{parentName:"li"},".dylib"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"drill-runtime.jar")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"drill.properties"))))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/agents/java-agent#how-to-set-path-to-agent"},"next section")," for further steps."),(0,l.kt)("h3",{id:"use-docker-image-with-a-download-script"},"Use Docker image with a download script"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Use case"),": when you are already using Docker Compose to start your application.")),(0,l.kt)("p",null,"We provide a small Docker image, that executes download script upon startup."),(0,l.kt)("p",null,"The way it works is:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"You add our container to your docker-compose.yml file, passing the desired version to ",(0,l.kt)("inlineCode",{parentName:"li"},"JAVA_AGENT")," env variable."),(0,l.kt)("li",{parentName:"ol"},"On startup, the container launches the download script."),(0,l.kt)("li",{parentName:"ol"},"Docker's healthcheck waits for it to complete."),(0,l.kt)("li",{parentName:"ol"},"Downloaded agent files are placed in a shared volume."),(0,l.kt)("li",{parentName:"ol"},"Shared volume is mounted to your application's container.")),(0,l.kt)("p",null,"See the example ",(0,l.kt)("a",{target:"_blank",href:a(270).Z},"docker-compose.yml")," file for details."),(0,l.kt)("h3",{id:"use-drill4j-cicd-integration-plugin-for-maven-and-gradle"},"Use Drill4J CI/CD Integration Plugin for Maven and Gradle"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Use cases"),": when application (or certain classes of application) is launched with Maven or Gradle. Thats most often the case with ",(0,l.kt)("strong",{parentName:"p"},"Unit tests"),".")),(0,l.kt)("p",null,"Drill4J CI/CD Integration Plugin ",(0,l.kt)("strong",{parentName:"p"},"automatically downloads agent files")," and ",(0,l.kt)("strong",{parentName:"p"},"passes required parameters to Java"),"."),(0,l.kt)("p",null,"Because of that, the next sections of this page are irrelevant in this scenario. Instead, please refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cicd-integration/cicd-integration-plugin"},"CI/CD Integration Plugin")," page for more info."),(0,l.kt)("h2",{id:"how-to-set-path-to-agent"},"How to set path to agent"),(0,l.kt)("p",null,"To load Drill4J Application Agent with your application, you need to instruct Java Virtual Machine (JVM) to use agent files.\nDrill4J has two modes of loading Application Agent:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Native mode (recommended) - uses native library file (",(0,l.kt)("inlineCode",{parentName:"li"},".so"),", ",(0,l.kt)("inlineCode",{parentName:"li"},".dll"),", ",(0,l.kt)("inlineCode",{parentName:"li"},".dylib"),")"),(0,l.kt)("li",{parentName:"ul"},"Java mode - uses ",(0,l.kt)("inlineCode",{parentName:"li"},"drill-runtime.jar")," file")),(0,l.kt)("p",null,"Depending on mode you choose, the way to set path to agent differs."),(0,l.kt)("h3",{id:"native-agent-mode-recommended"},"Native Agent Mode (recommended)"),(0,l.kt)("p",null,"Java allows to load native agents using ",(0,l.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javase/8/docs/platform/jvmti/jvmti.html#starting"},"special command line argument"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"java -agentpath:<path-to-agent>\n")),(0,l.kt)("p",null,"Where ",(0,l.kt)("inlineCode",{parentName:"p"},"<path-to-agent>")," must point to native agent library file (",(0,l.kt)("inlineCode",{parentName:"p"},".so"),", ",(0,l.kt)("inlineCode",{parentName:"p"},".dll"),", ",(0,l.kt)("inlineCode",{parentName:"p"},".dylib"),")."),(0,l.kt)("h3",{id:"java-agent-mode"},"Java Agent Mode"),(0,l.kt)("p",null,"If your platform is not supported with native library, you can use Java mode.\nTo load Drill4J Application Agent in Java mode, use the following command line argument:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"java -javaagent:<path-to-drill-runtime-jar>\n")),(0,l.kt)("p",null,"Where ",(0,l.kt)("inlineCode",{parentName:"p"},"<path-to-drill-runtime-jar>")," must point to ",(0,l.kt)("inlineCode",{parentName:"p"},"drill-runtime.jar")," file."),(0,l.kt)("h3",{id:"setting-agent-path-argument"},"Setting agent path argument"),(0,l.kt)("p",null,"There are two way to set this command line argument."),(0,l.kt)("h4",{id:"pass-agent-path-argument-directly-to-java-process"},"Pass agent path argument directly to Java process"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Use case"),": when you have a direct access to ",(0,l.kt)("strong",{parentName:"p"},"Java"),"'s process launch arguments. ")),(0,l.kt)("p",null,"Considering your application is launched with:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"  java -jar my-app.jar\n")),(0,l.kt)("p",null,"Change it to:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"  # Native Mode, Linux\n  java -agentpath:/agent/libdrill_agent.so -jar my-app.jar\n  # Native Mode, Windows\n  java -agentpath:/agent/drill_agent.dll -jar my-app.jar\n  # Native Mode, MacOS\n  java -agentpath:/agent/libdrill_agent.dylib -jar my-app.jar\n  # Java Mode\n  java -javaagent:/agent/drill-runtime.jar -jar my-app.jar\n")),(0,l.kt)("h4",{id:"set-agent-path-to-java_tool_options-env-variable"},"Set agent path to ",(0,l.kt)("inlineCode",{parentName:"h4"},"JAVA_TOOL_OPTIONS")," env variable"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Use case"),": when you don't have direct access to the ",(0,l.kt)("strong",{parentName:"p"},"Java"),"'s process launch arguments. It's often the case when app is launched somewhere deep in scripts or inside Docker container.")),(0,l.kt)("p",null,"Use ",(0,l.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javase/8/docs/platform/jvmti/jvmti.html#tooloptions"},(0,l.kt)("inlineCode",{parentName:"a"},"JAVA_TOOL_OPTIONS"))," to instruct ",(0,l.kt)("strong",{parentName:"p"},"Java")," to use Drill4J Java Agent. Its a built-in env variable supported by any Java version."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"  # Native Mode, Linux\n  JAVA_TOOL_OPTIONS=-agentpath:/agent/libdrill_agent.so\n  # Native Mode, Windows\n  JAVA_TOOL_OPTIONS=-agentpath:/agent/drill_agent.dll\n  # Native Mode, MacOS\n  JAVA_TOOL_OPTIONS=-agentpath:/agent/libdrill_agent.dylib\n  # Java Mode\n  JAVA_TOOL_OPTIONS=-javaagent:/agent/drill-runtime.jar\n")),(0,l.kt)("h3",{id:"troubleshooting"},"Troubleshooting"),(0,l.kt)("p",null,"To ensure you set agentpath correctly see ",(0,l.kt)("a",{parentName:"p",href:"#how-to-confirm-agent-is-loaded"},"how to confirm agent is loaded")," section below."),(0,l.kt)("h2",{id:"how-to-set-agent-parameters"},"How to set agent parameters"),(0,l.kt)("p",null,"Drill4J agent supports 3 ways to set agent ",(0,l.kt)("a",{parentName:"p",href:"#agent-parameters-reference"},"parameters")),(0,l.kt)("h3",{id:"set-parameters-using-environment-variables"},"Set parameters using environment variables"),(0,l.kt)("p",null,"This is the recommended way to set agent parameters."),(0,l.kt)("p",null,"Env variables names are prefixed with ",(0,l.kt)("inlineCode",{parentName:"p"},"DRILL_")," with uppercase snake case. Examples:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Given ",(0,l.kt)("inlineCode",{parentName:"li"},"packagePrefixes")," parameter the env variable is ",(0,l.kt)("inlineCode",{parentName:"li"},"DRILL_PACKAGE_PREFIXES"))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Precedence"),": parameter values set with env variables have the highest precedence and will override values set in ",(0,l.kt)("inlineCode",{parentName:"p"},"-agentpath")," string or  ",(0,l.kt)("inlineCode",{parentName:"p"},"drill.properties")," file."),(0,l.kt)("h3",{id:"set-parameters-in--agentpath-argument-string"},"Set parameters in ",(0,l.kt)("inlineCode",{parentName:"h3"},"-agentpath")," argument string"),(0,l.kt)("p",null,"Append parameters to ",(0,l.kt)("inlineCode",{parentName:"p"},"-agentpath")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"-javaagent")," argument string. Add ",(0,l.kt)("inlineCode",{parentName:"p"},"=<options>")," after ",(0,l.kt)("inlineCode",{parentName:"p"},"<path-to-agent>"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"#Native Mode\n-agentpath:<path-to-agent>=<options>\n#Java Mode\n-javaagent:<path-to-agent>=<options>\n")),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-agentpath:/agent/libdrill_agent.so=parameter1=hello,parameter2=bar\n")),(0,l.kt)("p",null,"Parameters are:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"passed after ",(0,l.kt)("inlineCode",{parentName:"li"},"<path-to-agent>")," (",(0,l.kt)("inlineCode",{parentName:"li"},"/agent/libdrill_agent.so")," above)"),(0,l.kt)("li",{parentName:"ul"},"start of parameters string is indicated with ",(0,l.kt)("inlineCode",{parentName:"li"},"=")," sign"),(0,l.kt)("li",{parentName:"ul"},"parameters are ",(0,l.kt)("inlineCode",{parentName:"li"},"<key>=<value>")," pairs"),(0,l.kt)("li",{parentName:"ul"},"each pair is separated by comma.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Precedence"),": parameter values set with ",(0,l.kt)("inlineCode",{parentName:"p"},"-agentpath")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"-javaagent")," will override values set in ",(0,l.kt)("inlineCode",{parentName:"p"},"drill.properties")),(0,l.kt)("h3",{id:"set-parameters-in-drillproperties-file"},"Set parameters in ",(0,l.kt)("inlineCode",{parentName:"h3"},"drill.properties")," file"),(0,l.kt)("p",null,"Alternatively, Drill4J agent checks for values in ",(0,l.kt)("inlineCode",{parentName:"p"},"drill.properties")," file. By default it is downloaded with agent files."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"parameter1=hello\nparameter2=bar\n")),(0,l.kt)("p",null,"It adheres to the ",(0,l.kt)("a",{parentName:"p",href:"https://docs.oracle.com/cd/E23095_01/Platform.93/ATGProgGuide/html/s0204propertiesfileformat01.html"},"properties file syntax")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Precedence"),": parameter values set in ",(0,l.kt)("inlineCode",{parentName:"p"},"drill.properties")," file have the lowest precedence and can be overriden by ",(0,l.kt)("inlineCode",{parentName:"p"},"-agentpath")," and env variables."),(0,l.kt)("h2",{id:"agent-parameters-reference"},"Agent parameters reference"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Example Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"apiUrl"),(0,l.kt)("td",{parentName:"tr",align:null},"yes"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"http://localhost/api")),(0,l.kt)("td",{parentName:"tr",align:null},"URL to Drill4J Admin /api endpoint.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"apiKey"),(0,l.kt)("td",{parentName:"tr",align:null},"yes"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"1_01cdf51ff20544ee...")),(0,l.kt)("td",{parentName:"tr",align:null},"Drill4J Backend API key. Generate it using Drill4J UI.  Please make sure to read the ",(0,l.kt)("a",{parentName:"td",href:"#api-key-security"},"apiKey security")," section")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"groupId"),(0,l.kt)("td",{parentName:"tr",align:null},"yes"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"my-cool-app")),(0,l.kt)("td",{parentName:"tr",align:null},"Unique arbitrary string identifying your application group.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"appId"),(0,l.kt)("td",{parentName:"tr",align:null},"yes"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"api-service")),(0,l.kt)("td",{parentName:"tr",align:null},"Unique arbitrary string identifying your application.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"packagePrefixes"),(0,l.kt)("td",{parentName:"tr",align:null},"yes"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"my/org/somecoolapp")),(0,l.kt)("td",{parentName:"tr",align:null},"Specifies the packages for Drill4J to monitor. See ",(0,l.kt)("a",{parentName:"td",href:"#how-to-set-package-prefixes"},"syntax and examples")," below.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"buildVersion"),(0,l.kt)("td",{parentName:"tr",align:null},"recommended ",(0,l.kt)("br",null)," ",(0,l.kt)("a",{parentName:"td",href:"#considerations-regarding-buildversion-and-commitsha"},"see more")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"v1.2.3")),(0,l.kt)("td",{parentName:"tr",align:null},"Build version of your application. Typically set to version tag.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"commitSha"),(0,l.kt)("td",{parentName:"tr",align:null},"recommended ",(0,l.kt)("br",null)," ",(0,l.kt)("a",{parentName:"td",href:"#considerations-regarding-buildversion-and-commitsha"},"see more")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"8d87b0c2379a925...")),(0,l.kt)("td",{parentName:"tr",align:null},"Full SHA hash of commit from which your application .jar is built from.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"envId"),(0,l.kt)("td",{parentName:"tr",align:null},"no"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"develop")),(0,l.kt)("td",{parentName:"tr",align:null},"Environment identifier in which the application is running.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"classScanningEnabled"),(0,l.kt)("td",{parentName:"tr",align:null},"no"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"Enables or disables class scanning procedure. If none is specified, class scanning is enabled by default.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"scanClassDelay"),(0,l.kt)("td",{parentName:"tr",align:null},"no"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"5000")),(0,l.kt)("td",{parentName:"tr",align:null},"Time in milliseconds to delay the class scanning procedure. If none is specified, the class scanning starts immediately upon JVM startup")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"scanClassPath"),(0,l.kt)("td",{parentName:"tr",align:null},"no"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Path(s) to application's .jar/.war/.ear files. If none are specified, the agent attempts to find application classes automatically. See ",(0,l.kt)("a",{parentName:"td",href:"#how-to-set-scanclasspath"},"syntax and examples")," below.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"messageQueueLimit"),(0,l.kt)("td",{parentName:"tr",align:null},"no"),(0,l.kt)("td",{parentName:"tr",align:null},"512Mb"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum queue capacity for sending messages to Drill4J Backend. The queue may accumulate, for example, if the server is unavailable. If none is specified, the default value is 512Mb.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"messageMaxRetries"),(0,l.kt)("td",{parentName:"tr",align:null},"no"),(0,l.kt)("td",{parentName:"tr",align:null},"10"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum number of retries for sending messages to Drill4J Backend. If nothing is specified, there will be infinite attempts to send messages.")))),(0,l.kt)("h3",{id:"env-variables-naming"},"Env variables naming"),(0,l.kt)("p",null,"Environment variables start with the prefix ",(0,l.kt)("inlineCode",{parentName:"p"},"DRILL_"),", followed by the parameter name in ",(0,l.kt)("inlineCode",{parentName:"p"},"UPPERCASE_SNAKE_CASE"),"."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example"),":"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"For ",(0,l.kt)("inlineCode",{parentName:"li"},"apiUrl"),", the env var is ",(0,l.kt)("inlineCode",{parentName:"li"},"DRILL_API_URL"),"."),(0,l.kt)("li",{parentName:"ol"},"For ",(0,l.kt)("inlineCode",{parentName:"li"},"packagePrefixes"),", the env var is ",(0,l.kt)("inlineCode",{parentName:"li"},"DRILL_PACKAGE_PREFIXES"),".")),(0,l.kt)("h3",{id:"how-to-set-package-prefixes"},"How to set package prefixes"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"packagePrefixes")," is the filter that specifies which packages Drill4J should monitor. It is usually set to the topmost common package of your application."),(0,l.kt)("p",null,"Avoid setting it to something very broad (like ",(0,l.kt)("inlineCode",{parentName:"p"},"com")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"org"),") - otherwise you will be scanning and collecting metrics for third-party dependencies."),(0,l.kt)("h4",{id:"syntax"},"Syntax"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Parts of package names are separated with forward slashes ",(0,l.kt)("inlineCode",{parentName:"li"},"/")," (and not dots ",(0,l.kt)("inlineCode",{parentName:"li"},"."),")"),(0,l.kt)("li",{parentName:"ol"},"Multiple packages can be specified using ",(0,l.kt)("inlineCode",{parentName:"li"},";")," delimiter"),(0,l.kt)("li",{parentName:"ol"},"To exclude package use ",(0,l.kt)("inlineCode",{parentName:"li"},"!")," prefix.")),(0,l.kt)("h4",{id:"example"},"Example"),(0,l.kt)("p",null,"Given you app packages are:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"my.org.somecoolapp.user")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"my.org.somecoolapp.orders.repository")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"my.org.somecoolapp.db.models"))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"packagePrefixes")," parameter should be set to ",(0,l.kt)("inlineCode",{parentName:"p"},"my/org/somecoolapp")),(0,l.kt)("h4",{id:"adding-extra-package"},"Adding extra package"),(0,l.kt)("p",null,"Add package name separated by ",(0,l.kt)("inlineCode",{parentName:"p"},";")," - ",(0,l.kt)("inlineCode",{parentName:"p"},"my/org/somecoolapp;some/other/package"),"."),(0,l.kt)("p",null,"This adds both ",(0,l.kt)("inlineCode",{parentName:"p"},"my/org/somecoolapp")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"some.other.package")," to scanned packages."),(0,l.kt)("h4",{id:"excluding-package"},"Excluding package"),(0,l.kt)("p",null,"Add package name prefixed with ",(0,l.kt)("inlineCode",{parentName:"p"},"!")," - ",(0,l.kt)("inlineCode",{parentName:"p"},"my/org/somecoolapp;!my.org.somecoolapp.db.models"),"."),(0,l.kt)("p",null,"This adds ",(0,l.kt)("inlineCode",{parentName:"p"},"my/org/somecoolapp")," to scanned packages, but excludes ",(0,l.kt)("inlineCode",{parentName:"p"},"my.org.somecoolapp.db.models"),"."),(0,l.kt)("h3",{id:"how-to-set-scanclasspath"},"How to set scanClassPath"),(0,l.kt)("p",null,"Specifies path(s) for the application agent to look for .jar, .war, or .ear files"),(0,l.kt)("p",null,"Useful when the application agent is unable to locate these automatically  (e.g. when running ",(0,l.kt)("a",{parentName:"p",href:"/docs/guides/wildfly"},"Wildfly")," or ",(0,l.kt)("a",{parentName:"p",href:"/docs/guides/tomcat"},"Tomcat"),")"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'# Single path\nscanClassPath=../webapps/my-app.war\n\n# Multiple paths - use the ";" delimiter\n# scanClassPath=../webapps/my-app.war;../webapps/other-app.war\n\n# Absolute paths work too\n# scanClassPath=C:/java/tomcat-10/webapps/helloworld.war\n')),(0,l.kt)("h3",{id:"api-key-security"},"API key security"),(0,l.kt)("p",null,"\u2757 Please avoid hardcoding ",(0,l.kt)("strong",{parentName:"p"},"apiKey")," and exposing it in plain text. Instead, use environment variables. \u2757"),(0,l.kt)("p",null,"Bad example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"  -agentpath:/agent/libdrill_agent.so=drillApiKey=123\n")),(0,l.kt)("p",null,"Good example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"  # Set DRILL_API_KEY variable prior to application launch\n  DRILL_API_KEY=123\n  # exact syntax for env variables will depend on your environment\n")),(0,l.kt)("h3",{id:"considerations-regarding-buildversion-and-commitsha"},"Considerations regarding ",(0,l.kt)("inlineCode",{parentName:"h3"},"buildVersion")," and ",(0,l.kt)("inlineCode",{parentName:"h3"},"commitSha")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Necessity"),": While ",(0,l.kt)("inlineCode",{parentName:"p"},"buildVersion")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"commitSha")," are not strictly required, we recommend providing at least one (ideally both) for the following reasons:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"It allows Drill4J to group metrics by version or commit."),(0,l.kt)("li",{parentName:"ul"},"Without ",(0,l.kt)("inlineCode",{parentName:"li"},"buildVersion")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"commitSha"),", Drill4J reports each application instance individually. Instances are identified with a random UUID."))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Uniqueness"),": Both ",(0,l.kt)("inlineCode",{parentName:"p"},"buildVersion")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"commitSha")," identify a unique application version, each associated with a specific set of classes and methods."),(0,l.kt)("p",{parentName:"li"},"To maintain the integrity of metrics, ensure that different application versions do not share the same ",(0,l.kt)("inlineCode",{parentName:"p"},"buildVersion")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"commitSha")," values."),(0,l.kt)("p",{parentName:"li"},"Using identical values across different versions will lead to inaccurate metrics due to the mixing of unrelated data.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Semantics"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"buildVersion")," typically corresponds to the version tag of your application. "),(0,l.kt)("p",{parentName:"li"},"Compliance with ",(0,l.kt)("a",{parentName:"p",href:"https://semver.org/"},"Semver")," is not required. Drill4J treats the build version as a unique string for grouping metrics, without any added semantics."))),(0,l.kt)("h2",{id:"troubleshooting-1"},"Troubleshooting"),(0,l.kt)("h3",{id:"how-to-confirm-agent-is-loaded"},"How to confirm agent is loaded"),(0,l.kt)("p",null,"Once loaded Drill4J agent prints the following ASCII logo:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-log"},'  ____    ____                 _       _          _  _                _      \n  |  _"\\U |  _"\\ u     ___     |"|     |"|        | ||"|            U |"| u   \n/| | | |\\| |_) |/    |_"_|  U | | u U | | u      | || |_          _ \\| |/    \nU| |_| |\\|  _ <       | |    \\| |/__ \\| |/__     |__   _|        | |_| |_,-. \n  |____/ u|_| \\_\\    U/| |\\u   |_____| |_____|      /|_|\\          \\___/-(_/  \n  |||_   //   \\\\_.-,_|___|_,-.//  \\\\  //  \\\\      u_|||_u          _//       \n(__)_) (__)  (__)\\_)-\' \'-(_/(_")("_)(_")("_)     (__)__)         (__)  \nJava Agent (v0.9.1)\n')),(0,l.kt)("p",null,"It indicates that you have configured agent path correctly and Java picked up and loaded agent files."),(0,l.kt)("h3",{id:"cannot-load-the-agent-because-some-agent-parameters-are-set-incorrectly"},"Cannot load the agent because some agent parameters are set incorrectly"),(0,l.kt)("p",null,"If below Drill4J ASCII logo you see the following message:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"ERROR [com.epam.drill.agent.configuration.ValidatedParametersProvider] Cannot load the agent because some agent parameters are set incorrectly. Please \ncheck the following parameters:\n")),(0,l.kt)("p",null,"It indicates that you are missing some required parameters. Refer to the ",(0,l.kt)("a",{parentName:"p",href:"#agent-parameters-configuration-options"},"agent parameters")," section."),(0,l.kt)("h3",{id:"error-could-not-create-an-appender-of-type-"},'Error "Could not create an Appender of type ..."'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"|-ERROR in com.epam.drill.autotest.shadow.ch.qos.logback.core.joran.action.AppenderAction - Could not create an Appender of type [ch.qos.logback.core.ConsoleAppender].\n|-ERROR in com.epam.drill.autotest.shadow.ch.qos.logback.core.joran.spi.Interpreter@5:73 - ActionException in Action for tag [appender]\n")),(0,l.kt)("p",null,"The following error can be safely ignored as it doesn\u2019t impact the functionality of the application or agent.\nIt simply indicates that Logback is being used with a logback.xml file, which conflicts with the Drill4J logging configuration. However, logging will still function as expected."))}d.isMDXComponent=!0},270:function(e,t,a){"use strict";t.Z=a.p+"assets/files/download-agent-files.docker-compose-e3ca61dad113c7bb04e9271a9329e862.yml"},2911:function(e){"use strict";e.exports=JSON.parse('{"Hl":"0.9.20","_2":"0.23.11","ns":"0.1.15","lv":"0.9.24","ui":"0.1.6","mR":"0.9.14"}')}}]);