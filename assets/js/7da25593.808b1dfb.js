(self.webpackChunkdrill4j_github_io=self.webpackChunkdrill4j_github_io||[]).push([[2155],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return m},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,g=p["".concat(s,".").concat(d)]||p[d]||u[d]||i;return n?a.createElement(g,l(l({ref:t},m),{},{components:n})):a.createElement(g,l({ref:t},m))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6122:function(e,t,n){"use strict";n.d(t,{r0:function(){return s},Ct:function(){return f},jL:function(){return h},Zb:function(){return p},JO:function(){return m},Ee:function(){return b},kI:function(){return B},dl:function(){return M},HC:function(){return _},Wl:function(){return oe},E1:function(){return ie},Nt:function(){return H},iA:function(){return I},v3:function(){return R}});var a,r,i,l=n(7294),o="additionalInformation_3spC",s=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return l.createElement("p",{className:o+" "+a},t)},c=n(4996),m=function(e){var t=e.src,n=e.width,a=void 0===n?16:n,r=e.height,i=void 0===r?16:r,o=e.className;return l.createElement("span",{className:o,style:{backgroundImage:"url("+(0,c.Z)(t)+")",minWidth:a+"px",minHeight:i+"px",display:"inline-block"}})},u="card_3fnR",p=function(e){var t=e.children,n=e.iconSrc,a=e.href;return l.createElement("a",{href:(0,c.Z)(a),className:u,rel:"noreferrer"},l.createElement(m,{src:n,width:48,height:48}),l.createElement("span",null,t))},d=n(2122),g=n(9756),f=function(e){var t=e.color,n=void 0===t?"#687481":t,a=e.children,r=(0,g.Z)(e,["color","children"]);return l.createElement("span",(0,d.Z)({className:"inline-block px-2 text-14 leading-24 bg-monochrome-light-tint rounded-lg",style:{color:n}},r),a)},h=function(e){var t=e.backgroundSrc,n=e.children,a=(0,g.Z)(e,["backgroundSrc","children"]);return l.createElement("div",(0,d.Z)({className:"py-14 px-5 text-center bg-cover",style:{backgroundImage:"url("+(0,c.Z)(t)+")"}},a),n)},v=n(2879),b=function(e){var t=e.src,n=e.alt,a=(0,l.useState)(!1),r=a[0],i=a[1];return l.createElement(l.Fragment,null,l.createElement("img",{className:"cursor-pointer",src:(0,c.Z)(t),onClick:function(){return i(!0)},alt:n}),r&&l.createElement(v.Z,{mainSrc:(0,c.Z)(t),onCloseRequest:function(){return i(!1)},enableZoom:!1,imagePadding:48}))},k=n(1839);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var E,S=function(e){var t=e.title,n=e.titleId,o=y(e,["title","titleId"]);return l.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none","aria-labelledby":n},o),t?l.createElement("title",{id:n},t):null,a||(a=l.createElement("rect",{opacity:.8,width:24,height:24,rx:4,fill:"#687481"})),r||(r=l.createElement("path",{d:"M10.871 13.766l-.407.407-.982.982-1.184 1.184-1.027 1.027c-.166.165-.328.335-.498.497l-.007.007c-.167.167-.473.18-.637 0a.457.457 0 010-.636l.407-.407.982-.982 1.184-1.184 1.027-1.027c.166-.165.328-.335.498-.497l.007-.007c.167-.167.473-.18.637 0 .165.18.179.46 0 .636zm6.999-6.997l-.409.408-.976.976-1.187 1.188-1.022 1.021c-.167.168-.33.338-.5.5l-.008.008c-.167.167-.474.18-.639 0a.459.459 0 010-.639l.409-.408.976-.976 1.187-1.188 1.022-1.021c.167-.168.33-.338.5-.5l.008-.008c.167-.167.474-.18.639 0a.46.46 0 010 .639zm-7.636 4.102l-.407-.407-.982-.982L7.66 8.298 6.634 7.271c-.165-.166-.335-.328-.497-.498l-.007-.007c-.167-.167-.18-.473 0-.637a.457.457 0 01.636 0l.407.407.982.982L9.34 8.702l1.027 1.027c.165.166.335.328.497.498l.007.007c.167.167.18.473 0 .637a.457.457 0 01-.636 0zm6.997 7.001l-.408-.409-.976-.977-1.188-1.187-1.021-1.022c-.168-.168-.338-.33-.5-.5l-.008-.008c-.167-.168-.18-.475 0-.64a.459.459 0 01.639 0l.408.409.976.977 1.188 1.188 1.021 1.021c.168.168.338.33.5.501l.008.008c.167.167.18.474 0 .639a.462.462 0 01-.639 0z",fill:"#fff"})),i||(i=l.createElement("path",{d:"M6.953 13.477v4.046l-.476-.476h4.046c.25 0 .488.219.477.476a.484.484 0 01-.477.477H6.477A.483.483 0 016 17.523v-4.046c0-.25.22-.488.477-.477.259.011.476.21.476.477zM13.477 6h4.046c.258 0 .477.218.477.477v4.046c0 .25-.22.488-.477.477a.484.484 0 01-.476-.477V6.477l.476.476h-4.046c-.25 0-.488-.219-.477-.476A.485.485 0 0113.477 6zm-2.954.953H6.477l.476-.476v4.046c0 .25-.219.488-.476.477A.484.484 0 016 10.523V6.477C6 6.219 6.218 6 6.477 6h4.046c.25 0 .488.22.477.477a.485.485 0 01-.477.476zM18 13.477v4.046a.483.483 0 01-.477.477h-4.046c-.25 0-.488-.22-.477-.477a.484.484 0 01.477-.476h4.046l-.476.476v-4.046c0-.25.219-.488.476-.477.258.011.477.21.477.477z",fill:"#fff"})))};function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var j=function(e){var t=e.title,n=e.titleId,a=A(e,["title","titleId"]);return l.createElement("svg",x({width:36,height:36,viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},a),t?l.createElement("title",{id:n},t):null,E||(E=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.71 25.264a1.003 1.003 0 00-.001 1.415.997.997 0 001.412.002l7.073-7.073 7.07 7.07c.39.39 1.024.391 1.415.001a.997.997 0 00.002-1.412l-7.073-7.073 7.07-7.07c.39-.39.391-1.024.001-1.415a.997.997 0 00-1.412-.002l-7.073 7.073-7.07-7.07a1.003 1.003 0 00-1.414 0 .997.997 0 00-.002 1.412l7.073 7.073-7.07 7.07z"})))},O="table_EoDL",w="customScroll_2cyn",C="expandedTable_1nfl",I=function(e){var t=e.columns,n=void 0===t?[]:t,a=e.children,r=(0,l.useState)(!1),i=r[0],o=r[1],s=(0,l.useState)(!1),c=s[0],m=s[1],u=(0,l.useRef)(null);return(0,k.Z)(i),(0,l.useEffect)((function(){var e=u&&u.current;var t=new ResizeObserver((function(){e&&m(e.offsetHeight-e.clientHeight>0)}));return t.observe(e),function(){t.disconnect(e)}}),[u]),(0,l.useLayoutEffect)((function(){if(u.current&&null!=n&&n.length){var e=u.current.children[0];e.style.tableLayout="fixed";var t=document.createElement("colgroup");null==n||n.forEach((function(e){var n=document.createElement("col");return n.width=e,n.span=1,t.appendChild(n),n})),e.prepend(t)}}),[]),l.createElement("div",{className:O+" relative mb-4"},c&&l.createElement("button",{className:"absolute top-2 right-2 z-10","aria-label":"open expanded table button",type:"button",onClick:function(){return o(!0)}},l.createElement(S,null)),l.createElement("div",{ref:u,className:w},a),c&&l.createElement("div",{className:"fixed inset-0 z-50 transition-all duration-300 "+(i?"opacity-100":"opacity-0 invisible")},l.createElement("div",{className:"relative z-10 flex items-center justify-end h-12 pr-7 bg-monochrome-black bg-opacity-90"},l.createElement("button",{type:"button","aria-label":"close expanded table button",className:"flex items-center justify-center w-9 h-9 text-monochrome-medium-tint hover:text-monochrome-white",onClick:function(){return o(!1)}},l.createElement(j,{className:"fill-current cursor-pointer"}))),l.createElement("div",{className:"absolute inset-0 bg-monochrome-black opacity-60",onClick:function(){return o(!1)}}),l.createElement("div",{className:C+" "+w},a)))},T="listItem_qKEr",P="listItem_content_1vAz",_=function(e){var t=e.children,n=e.number;return l.createElement("div",{className:T},l.createElement("div",null,n),l.createElement("div",{className:P},t))},M=function(){return l.createElement("div",{className:"flex flex-col items-center"},l.createElement("h3",{className:"text-center"},"We are using a RealWorld app examples:"),l.createElement("div",{className:"flex gap-x-6 mb-12 text-16 leading-20"},l.createElement("div",{className:"flex justify-center items-center gap-x-3 leading-20"},l.createElement("img",{style:{marginBottom:0},src:(0,c.Z)("img/spring-logo.svg"),alt:"spring-logo"}),l.createElement("span",{className:"flex flex-col"},"Backend:\xa0",l.createElement("a",{className:"leading-20",href:"https://github.com/gothinkster/spring-boot-realworld-example-app",target:"_blank",rel:"noreferrer noopener"},"Spring"))),l.createElement("div",{className:"flex justify-center items-center"},l.createElement("img",{style:{marginBottom:0},src:(0,c.Z)("img/plus.svg"),alt:"plus"})),l.createElement("div",{className:"flex justify-center items-center gap-x-3"},l.createElement("img",{style:{marginBottom:0},src:(0,c.Z)("img/angular-logo.svg"),alt:"angular-logo"}),l.createElement("span",{className:"flex flex-col leading-20"},"Frontend:\xa0",l.createElement("a",{className:"leading-20",href:"https://github.com/gothinkster/angular-realworld-example-app",target:"_blank",rel:"noreferrer noopener"},"Angular")))))},D=n(6010),Z="wrapper_2S3f",R=function(e){var t=e.children;return l.createElement("div",{className:(0,D.Z)(Z,"flex gap-x-3 py-4 px-4 mb-4","rounded-lg bg-orange-default bg-opacity-5","text-monochrome-default text-16 leading-24")},l.createElement(m,{src:"img/warning.svg",width:16,height:16,className:"mt-1 h-4 text-orange-default"}),l.createElement("div",null,t))},L="wrapper_1vbA",B=function(e){var t=e.children;return l.createElement("div",{className:(0,D.Z)(L,"flex gap-x-3 py-5 px-4 mb-4","rounded-lg bg-blue-default bg-opacity-5","text-monochrome-default text-16 leading-24")},l.createElement(m,{src:"img/info.svg",width:16,height:16,className:"mt-1 h-4 text-orange-default"}),l.createElement("div",null,t))},z=n(5035),G="tableOfContents_1zbr",V="table-of-contents__link";function F(e){var t=e.toc,n=e.isChild;return t.length?l.createElement("ul",{className:n?"":"table-of-contents table-of-contents__left-border"},t.map((function(e){return l.createElement("li",{key:e.id},l.createElement("a",{href:"#"+e.id,className:V,dangerouslySetInnerHTML:{__html:e.value},title:e.value}),l.createElement(F,{isChild:!0,toc:e.children}))}))):null}function H(e){var t=e.toc;return(0,z.Z)(V,"table-of-contents__link--active",100),l.createElement("div",{className:(0,D.Z)(G,"thin-scrollbar")},l.createElement(F,{toc:t}))}var W=n(3935),J=n(2263),U=n(5977),q=n(6742),X=n(9105),Y=n(6397),K=n(7052),Q=n(6747),$=n(5613),ee=n(4973),te=null;function ne(e){var t=e.hit,n=e.children;return l.createElement(q.Z,{to:t.url},n)}function ae(e){var t=e.state,n=e.onClose,a=(0,Y.Z)().generateSearchPageLink;return l.createElement(q.Z,{to:a(t.query),onClick:n},"See all ",t.context.nbHits," results")}function re(e){var t,a,r=e.contextualSearch,i=e.closeDocsSidebar,o=(0,g.Z)(e,["contextualSearch","closeDocsSidebar"]),s=(0,J.default)().siteMetadata,m=(0,$.Z)(),u=null!=(t=null==(a=o.searchParameters)?void 0:a.facetFilters)?t:[],p=r?[].concat(m,u):u,f=Object.assign({},o.searchParameters,{facetFilters:p}),h=(0,c.C)().withBaseUrl,v=(0,U.k6)(),b=(0,l.useRef)(null),k=(0,l.useRef)(null),N=(0,l.useState)(!1),y=N[0],E=N[1],S=(0,l.useState)(null),x=S[0],A=S[1],j=(0,l.useCallback)((function(){return te?Promise.resolve():Promise.all([n.e(3763).then(n.bind(n,3763)),Promise.all([n.e(532),n.e(6945)]).then(n.bind(n,6945)),Promise.all([n.e(532),n.e(4628)]).then(n.bind(n,4628))]).then((function(e){var t=e[0].DocSearchModal;te=t}))}),[]),O=(0,l.useCallback)((function(){j().then((function(){b.current=document.createElement("div"),document.body.insertBefore(b.current,document.body.firstChild),E(!0)}))}),[j,E]),w=(0,l.useCallback)((function(){i(),E(!1),b.current.remove()}),[E]),C=(0,l.useCallback)((function(e){j().then((function(){E(!0),A(e.key)}))}),[j,E,A]),I=(0,l.useRef)({navigate:function(e){var t=e.itemUrl;v.push(t)}}).current,T=(0,l.useRef)((function(e){return e.map((function(e){var t=document.createElement("a");return t.href=e.url,Object.assign({},e,{url:h(""+t.pathname+t.hash)})}))})).current,P=(0,l.useMemo)((function(){return function(e){return l.createElement(ae,(0,d.Z)({},e,{onClose:w}))}}),[w]),_=(0,l.useCallback)((function(e){return e.addAlgoliaAgent("docusaurus",s.docusaurusVersion),e}),[s.docusaurusVersion]);(0,K.D)({isOpen:y,onOpen:O,onClose:w,onInput:C,searchButtonRef:k});var M=(0,ee.I)({id:"theme.SearchBar.label",message:"Search",description:"The ARIA label and placeholder for search button"});return l.createElement(l.Fragment,null,l.createElement(X.Z,null,l.createElement("link",{rel:"preconnect",href:"https://"+o.appId+"-dsn.algolia.net",crossOrigin:"anonymous"})),l.createElement(Q.a,{onTouchStart:j,onFocus:j,onMouseOver:j,onClick:O,ref:k,translations:{buttonText:M,buttonAriaLabel:M}}),y&&(0,W.createPortal)(l.createElement(te,(0,d.Z)({onClose:w,initialScrollY:window.scrollY,initialQuery:x,navigator:I,transformItems:T,hitComponent:ne,resultsFooterComponent:P,transformSearchClient:_},o,{searchParameters:f})),b.current))}var ie=function(e){var t=e.closeDocsSidebar,n=(0,J.default)().siteConfig;return l.createElement(re,(0,d.Z)({},n.themeConfig.algolia,{closeDocsSidebar:t}))},le=n(3424);le.Z.initialize({startOnLoad:!0});var oe=function(e){var t=e.chart;return(0,l.useEffect)((function(){le.Z.contentLoaded()}),[]),l.createElement("div",{className:"mermaid"},t)}},9489:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c},default:function(){return u}});var a=n(2122),r=n(9756),i=(n(7294),n(3905)),l=n(6122),o={id:"js-agent-admin-be-communication",title:"JS Agent / Admin Backend Communication"},s={unversionedId:"pre-0.8.0/for-development/java-script-agent/js-agent-admin-be-communication",id:"version-0.8.0/pre-0.8.0/for-development/java-script-agent/js-agent-admin-be-communication",isDocsHomePage:!1,title:"JS Agent / Admin Backend Communication",description:"Messages",source:"@site/versioned_docs/version-0.8.0/pre-0.8.0/for-development/java-script-agent/js-agent-admin-be-communication.mdx",sourceDirName:"pre-0.8.0/for-development/java-script-agent",slug:"/pre-0.8.0/for-development/java-script-agent/js-agent-admin-be-communication",permalink:"/docs/0.8.0/pre-0.8.0/for-development/java-script-agent/js-agent-admin-be-communication",version:"0.8.0",frontMatter:{id:"js-agent-admin-be-communication",title:"JS Agent / Admin Backend Communication"},sidebar:"version-0.8.0/docs",previous:{title:"Switch Scope Event Flow",permalink:"/docs/0.8.0/pre-0.8.0/for-development/java-agent/java-switch-scope-event-flow"},next:{title:"Builds Summary",permalink:"/docs/0.8.0/pre-0.8.0/api/builds-summary"}},c=[{value:"Messages",id:"messages",children:[{value:"Admin",id:"admin",children:[]},{value:"Plugin",id:"plugin",children:[]}]},{value:"Agent Registration &amp; Test2Code Plugin Initialization",id:"agent-registration--test2code-plugin-initialization",children:[]},{value:"Start Session",id:"start-session",children:[]},{value:"Send Coverage",id:"send-coverage",children:[]},{value:"Stop/Cancel Session",id:"stopcancel-session",children:[]},{value:"Init Active Scope",id:"init-active-scope",children:[]}],m={toc:c};function u(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"messages"},"Messages"),(0,i.kt)("h3",{id:"admin"},"Admin"),(0,i.kt)("p",null,"Admin backend sends messages in the following format:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE",\n  "destination": "/agent/change-header-name",\n  "text": ""\n}\n')),(0,i.kt)(l.r0,{className:"space-y-2",mdxType:"AdditionalInformation"},(0,i.kt)(l.Ct,{mdxType:"Badge"},'"text"')," field is stringified."),(0,i.kt)("p",null,"Admin backend expects to get a response ",(0,i.kt)("strong",{parentName:"p"},"for each message"),', called "delivery confirmation" in the following format:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE_DELIVERED",\n  "destination": "/agent/change-header-name"\n}\n')),(0,i.kt)("p",null,"Some messages aren't used in JS agent initialization, so no actions are performed on JS agent side, ",(0,i.kt)("strong",{parentName:"p"},"but delivery confirmation is still sent"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)(l.Ct,{mdxType:"Badge"},"/agent/change-header-name")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)(l.Ct,{mdxType:"Badge"},"/agent/set-packages-prefixes")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)(l.Ct,{mdxType:"Badge"},"/agent/load-classes-data"))),(0,i.kt)("h3",{id:"plugin"},"Plugin"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "PLUGIN_DATA",\n  "text": {\n    "pluginId": "test2code",\n    "drillMessage": {\n      "content": "" // set to stringified plugin message\n    }\n  }\n}\n')),(0,i.kt)(l.r0,{className:"space-y-2",mdxType:"AdditionalInformation"},(0,i.kt)(l.Ct,{mdxType:"Badge"},'"content"')," field is stringified."),(0,i.kt)("h2",{id:"agent-registration--test2code-plugin-initialization"},"Agent Registration & Test2Code Plugin Initialization"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open WS connection to Admin backend API on the ",(0,i.kt)(l.Ct,{mdxType:"Badge"},"/agent/attach")," route (e.g. ",(0,i.kt)(l.Ct,{mdxType:"Badge"},"http://localhost:8090/agent/attach"),") with the following headers specified:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "AgentConfig": {\n    "id": "sample-agent-id",\n    "serviceGroupId": "sample-group-id",\n    "buildVersion": "0.0.1",\n    "agentType": "NODEJS",\n    "instanceId": ""\n  },\n  "needSync": true // is set to "true" during the initial connect ("false" if the agent establishes connection after a restart)\n}\n')))),(0,i.kt)(l.r0,{className:"space-y-2",mdxType:"AdditionalInformation"},(0,i.kt)("p",null,"At that point, agent should appear in Admin Panel. Register it, make sure to enable Test2Code plugin at step 3.")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Wait for the following message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE",\n  "destination": "/agent/load",\n  "text": {\n    "meta": {\n      "id": "test2code",\n      "name": "Test2Code",\n      "description": "Test2Code plugin minimizes your regression suite via Test Impact Analytics by suggesting only affected subset of tests to run, and highlight  untested areas via Test Gap Analysis, providing evidence of how changes are tested and which areas and not tested at all.",\n      "type": "Custom",\n      "family": "INSTRUMENTATION",\n      "enabled": true,\n      "config": "{\\"message\\": \\"hello from default plugin config... This is \'plugin_config.json file\\"}",\n      "checkSum": "da39a3ee5e6b4b0d3255bfef95601890afd80709",\n      "isNative": false\n    },\n    "data": []\n  }\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In response to ",(0,i.kt)("strong",{parentName:"p"},"that particular message")," JS agent sends 2 delivery confirmations:"),(0,i.kt)("p",{parentName:"li"},"send that first:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE_DELIVERED",\n  "destination": "/agent/plugin/test2code/loaded"\n}\n')),(0,i.kt)("p",{parentName:"li"},"send delivery confirmation for the original destination:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE_DELIVERED",\n  "destination": "/agent/load"\n}\n')))),(0,i.kt)(l.r0,{className:"space-y-2",mdxType:"AdditionalInformation"},(0,i.kt)("p",null,'"AST" data (metadata on packages, classes, methods) are sent during the next steps.')),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Wait for the following message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "destination": "/plugin/togglePlugin",\n  "data": {\n    "text": {\n      "pluginId": "test2code"\n    }\n  }\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send containing ",(0,i.kt)("strong",{parentName:"p"},'"AST"')," data:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  // this is a plugin message, wrap it into plugin message format (stringify, set result to "content" field, see "Messages/Plugin" above)\n  "type": "INIT_DATA_PART",\n  "astEntities": [\n    // each array entry represents a class\n    {\n      "path": "js/directives", // admin groups classes into packages based on that value\n      "name": "TodoBlur.ts",\n      "methods": [\n        {\n          "name": "GLOBAL",\n          "params": [],\n          "returnType": "void",\n          "probes": [3, 4, 17],\n          "count": 3\n        },\n        {\n          "name": "todoBlur",\n          "params": [],\n          "returnType": "void",\n          "probes": [9, 10, 15, 16],\n          "count": 4,\n          "checksum": "9381a3cce26fc23fbbe4e5650486ee0d5454af9792b51cfdfe4361436d2ecfc5"\n        }\n      ]\n    },\n    {\n      /* next class entry */\n    }\n  ]\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send delivery confirmation for ",(0,i.kt)("inlineCode",{parentName:"p"},"/plugin/togglePlugin"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE_DELIVERED",\n  "destination": "/plugin/togglePlugin"\n}\n')))),(0,i.kt)(l.r0,{className:"space-y-2",mdxType:"AdditionalInformation"},(0,i.kt)("p",null,"At that point, test2code plugin dashboard should be available in the Admin Panel. Check that methods table reflects actual packages, classes and methods.")),(0,i.kt)("h2",{id:"start-session"},"Start Session"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Wait for the ",(0,i.kt)("strong",{parentName:"p"},'"Start agent session"')," message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE",\n  "destination": "/plugin/action",\n  "text": {\n    "id": "test2code",\n    "message": {\n      "type": "START_AGENT_SESSION", // "STOP" in case of stop session action\n      "payload": {\n        "sessionId": "4867e838-51ca-4999-83c6-f68a7c7f279a",\n        "testType": "MANUAL",\n        "testName": "add1",\n        "isRealtime": true,\n        "isGlobal": false\n      }\n    }\n  }\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send ",(0,i.kt)("strong",{parentName:"p"},'"Session started"')," message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'// this is a plugin message, wrap it into plugin message format (stringify, set result to "content" field, see "Messages/Plugin" above)\n{\n  "type": "SESSION_STARTED",\n  "sessionId": "4867e838-51ca-4999-83c6-f68a7c7f279a",\n  "testType": "MANUAL",\n  "ts": "1616679452533"\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send delivery confirmation:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE_DELIVERED",\n  "destination": "/plugin/action"\n}\n')))),(0,i.kt)("h2",{id:"send-coverage"},"Send Coverage"),(0,i.kt)(l.r0,{className:"space-y-2",mdxType:"AdditionalInformation"},(0,i.kt)("p",null,"That might be better to implement it differently for the .NET agent, we've got to discuss that.")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send coverage data part message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'// this is a plugin message, wrap it into plugin message format (stringify, set result to "content" field, see "Messages/Plugin" above)\n{\n  "type": "COVERAGE_DATA_PART",\n  "sessionId": "4867e838-51ca-4999-83c6-f68a7c7f279a",\n  "data": [\n    {\n      "className": "js/controllers/TodoCtrl.ts",\n      // concatenated array of all class probes (from all methods)\n      "probes": [true, true, true, false, false, false, true, false, false, true],\n      "testName": "Add todo item"\n    },\n    {\n      "className": "js/directives/TodoBlur.ts",\n      // concatenated array of all class probes (from all methods)\n      "probes": [false, false, true, true, true, false, false, false, true, false, false, true],\n      "testName": "Add todo item"\n    },\n    {\n      /*next class coverage entry*/\n    }\n  ]\n}\n')))),(0,i.kt)("h2",{id:"stopcancel-session"},"Stop/Cancel Session"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Wait for the ",(0,i.kt)("strong",{parentName:"p"},'"Stop agent session"')," message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE",\n  "destination": "/plugin/action",\n  "text": {\n    "id": "test2code",\n    "message": {\n      "type": "STOP", // "CANCEL"\n      "payload": {\n        "sessionId": "4867e838-51ca-4999-83c6-f68a7c7f279a"\n      }\n    }\n  }\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send ",(0,i.kt)("strong",{parentName:"p"},'"Session finished"')," message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'// this is a plugin message, wrap it into plugin message format (stringify, set result to "content" field, see "Messages/Plugin" above)\n{\n  "type": "SESSION_FINISHED", // "SESSION_CANCELLED"\n  "sessionId": "4867e838-51ca-4999-83c6-f68a7c7f279a",\n  "ts": "1616679452533"\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send delivery confirmation:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE_DELIVERED",\n  "destination": "/plugin/action"\n}\n')))),(0,i.kt)("h2",{id:"init-active-scope"},"Init Active Scope"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Wait for the ",(0,i.kt)("strong",{parentName:"p"},'"Init active scope"')," message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE",\n  "destination": "/plugin/action",\n  "message": {\n    "id": "test2code",\n    "message": {\n      "type": "INIT_ACTIVE_SCOPE",\n      "payload": {\n        "id": "d525c728-eccb-4eaf-b0a9-be4a2281cafd",\n        "name": "New Scope 2",\n        "prevId": "97bfc5dc-d09d-4240-bf35-dbd999103818"\n      }\n    }\n  }\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send the ",(0,i.kt)("strong",{parentName:"p"},'"Scope initialized"')," message:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'// this is a plugin message, wrap it into plugin message format (stringify, set result to "content" field, see "Messages/Plugin" above)\n{\n  "type": "SCOPE_INITIALIZED",\n  "id": "d525c728-eccb-4eaf-b0a9-be4a2281cafd",\n  "name": "New Scope 2",\n  "prevId": "97bfc5dc-d09d-4240-bf35-dbd999103818",\n  "ts": "1616680302751"\n}\n'))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Send delivery confirmation:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "MESSAGE_DELIVERED",\n  "destination": "/plugin/action"\n}\n')))))}u.isMDXComponent=!0}}]);