(self.webpackChunkdrill4j_github_io=self.webpackChunkdrill4j_github_io||[]).push([[1410],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=s(n),m=a,g=u["".concat(p,".").concat(m)]||u[m]||d[m]||i;return n?r.createElement(g,l(l({ref:t},c),{},{components:n})):r.createElement(g,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var s=2;s<i;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},1476:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return o},toc:function(){return p},default:function(){return c}});var r=n(2122),a=n(9756),i=(n(7294),n(3905)),l={},o={unversionedId:"guides/wildfly",id:"version-0.9.0/guides/wildfly",isDocsHomePage:!1,title:"WildFly integration",description:"For general setup guidance, refer to the Application Agent page.",source:"@site/versioned_docs/version-0.9.0/guides/wildfly.mdx",sourceDirName:"guides",slug:"/guides/wildfly",permalink:"/docs/guides/wildfly",version:"0.9.0",frontMatter:{},sidebar:"version-0.9.0/docs",previous:{title:"Tomcat integration",permalink:"/docs/guides/tomcat"},next:{title:"Integration with Keycloak Auth Server",permalink:"/docs/guides/keycloak"}},p=[{value:"Troubleshooting",id:"troubleshooting",children:[]},{value:"Limitations",id:"limitations",children:[]}],s={toc:p};function c(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"For general setup guidance, refer to the ",(0,i.kt)("a",{parentName:"p",href:"/docs/agents/java-agent"},"Application Agent")," page."),(0,i.kt)("p",null,"The Application Agent's scanning algorithm does not fully support WildFly's modular architecture, which means it does not work for detecting application classes after deployment. "),(0,i.kt)("p",null,"As a result, paths to application archives (JAR/WAR/EAR) must be specified directly in the agent parameters:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Copy the Drill4J agent files")," into the ",(0,i.kt)("inlineCode",{parentName:"p"},"wildfly/bin/agent")," directory."),(0,i.kt)("p",{parentName:"li"},"Ensure that all the necessary files from Drill4J are present, including the ",(0,i.kt)("inlineCode",{parentName:"p"},"drill_agent.dll")," (or ",(0,i.kt)("inlineCode",{parentName:"p"},"libdrill_agent.so")," for Linux).")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Modify the WildFly startup configuration"),":"),(0,i.kt)("p",{parentName:"li"},"For Windows, edit the ",(0,i.kt)("inlineCode",{parentName:"p"},"bin/standalone.conf.bat")," file. On Linux, modify the ",(0,i.kt)("inlineCode",{parentName:"p"},"bin/standalone.conf")," file."),(0,i.kt)("p",{parentName:"li"},"Add the following line to the configuration file:"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Windows"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-cmd"},'set "JAVA_OPTS=%JAVA_OPTS% -Djboss.modules.system.pkgs=com.epam.drill -agentpath:agent/drill_agent.dll"\n')),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Linux"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'JAVA_OPTS="$JAVA_OPTS -Djboss.modules.system.pkgs=com.epam.drill -agentpath:agent/libdrill_agent.so"\n')),(0,i.kt)("p",{parentName:"li"},"This ensures that WildFly will load the Drill4J agent when the server starts."),(0,i.kt)("blockquote",{parentName:"li"},(0,i.kt)("p",{parentName:"blockquote"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"-Djboss.modules.system.pkgs=com.epam.drill")," option allows WildFly to load classes from the ",(0,i.kt)("inlineCode",{parentName:"p"},"com.epam.drill")," package, enabling proper integration with the Drill4J agent. Without it, the agent may not function correctly due to class loading restrictions."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Configure the agent to scan your application"),":"),(0,i.kt)("p",{parentName:"li"},"In the ",(0,i.kt)("inlineCode",{parentName:"p"},"drill.properties")," file (located in the agent's directory), add the ",(0,i.kt)("inlineCode",{parentName:"p"},"scanClassPath")," parameter to point to the application archive (WAR or EAR) you want to monitor. For example:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-properties"},"# Adjust the path to match the location of your deployed WAR file.\n# You can also specify multiple paths using a semicolon (`;`) as a delimiter.\nscanClassPath=C:/java/wildfly/standalone/deployments/helloworld.war\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Restart WildFly and verify"),":"),(0,i.kt)("p",{parentName:"li"},"After modifying the configuration and properties files, restart WildFly. Drill4J should now detect the classes in your WAR or EAR application and start sending data."))),(0,i.kt)("p",null,"This setup ensures Drill4J is correctly integrated with your WildFly server, allowing Application Agent to detect the application classes."),(0,i.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If the agent isn't detecting your application, verify that the correct ",(0,i.kt)("inlineCode",{parentName:"li"},"scanClassPath")," is set in the ",(0,i.kt)("inlineCode",{parentName:"li"},"drill.properties")," file."),(0,i.kt)("li",{parentName:"ul"},"Ensure the agent is correctly loaded by reviewing WildFly logs and checking the ",(0,i.kt)("a",{parentName:"li",href:"/docs/agents/java-agent#how-to-confirm-agent-is-loaded"},"Troubleshooting")," section in the Drill4J documentation.")),(0,i.kt)("h2",{id:"limitations"},"Limitations"),(0,i.kt)("p",null,"The Drill4J Application Agent cannot detect new applications deployed to WildFly while it is already running. To allow the Application Agent to detect new application classes, WildFly must be restarted."))}c.isMDXComponent=!0}}]);